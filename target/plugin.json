{"namespace":"amycatgirl","id":"skpd","version":3,"dyna":{"repo":"amycatgirl/sketchvolt","shouldRestart":false,"dev":true},"entrypoint":"() => {window.sketchpad={};window.sketchpad._open=!1;window.sketchpad._scriptLocations={func:\"https://raw.githubusercontent.com/amycatgirl/plugin-deps/main/sketchpad.js\",templ:\"https://raw.githubusercontent.com/amycatgirl/plugin-deps/main/sketchpadTemplate.js\"};window.sketchpad.injectDependency=async function(e){const n=await(await fetch(window.sketchpad._scriptLocations[e])).text(),t=document.createElement(\"script\");t.innerText=n,t.id=`sk-${e}`,t.onload=()=>console.log(\"loaded\",e),document.head.append(t)};window.sketchpad._loadSketchpad=async function(){await window.sketchpad.injectDependency(\"templ\"),document.body.insertAdjacentHTML(\"afterbegin\",window.sketchpad._html.replace(/\\\\/g,\"\"));const e=document.querySelector(\"[class^='sketchpad']\");e.style=\"display: none; position: absolute; width: 610px; height: 600px; bottom: 0; right: 0; z-index: 10000;\",document.querySelector(\".tooling > .picker\").insertAdjacentHTML(\"afterend\",\"<canvas id='drawandchat' width=400 height=400></canvas>\"),await window.sketchpad.injectDependency(\"func\")};window.sketchpad._unloadSketchpad=function(){for(const n of Object.keys(window.sketchpad._scriptLocations))document.getElementById(`sk-${n}`).remove();document.querySelector(\".sketchpad\").remove(),window.sketchpad._open=!1,SketchpadToggleObserver.disconnect()};window.sketchpad.toggleSketchpad=async function(){const e=document.querySelector(\"[class^='sketchpad']\");switch(window.sketchpad._open){case!0:e.style.display=\"none\",window.sketchpad._open=!1;break;case!1:e.style.display=\"flex\",window.sketchpad._open=!0;break}};window.sketchpad.internal={};window.sketchpad.internal.dataURItoBlob=function(e,n){for(var t=atob(e.split(\",\")[1]),a=e.split(\",\")[0].split(\":\")[1].split(\";\")[0],c=new ArrayBuffer(t.length),s=new Uint8Array(c),o=0;o<t.length;o++)s[o]=t.charCodeAt(o);var d=new Blob([c],{type:a});return d};window.sketchpad.internal.autumnUpload=async function(e){const n=window.controllers.client.getReadyClient(),t=new FormData;console.log(e);const a=new Date;return t.append(\"file\",e,`sketchpadDrawing-${a.toLocaleDateString()}`),(await fetch(\"https://autumn.revolt.chat/attachments\",{method:\"POST\",body:t,headers:{\"X-Session-Token\":n.session.token}}).then(async s=>await s.json())).id};window.sketchpad.uploadSketchpad=async function(e,n){const t=window.location.href.split(\"/\"),a=t[t.length-1];await window.controllers.client.getReadyClient().channels.get(a).sendMessage({content:n??\"\",attachments:[e]}).then(()=>window.sketchpad.toggleSketchpad())};const sketchpadAction=document.createElement(\"div\");sketchpadAction.className=\"MessageBox__Action-sc-jul4fa-2 fIbyPH\";sketchpadAction.innerHTML=`<a class='IconButton-sc-166lqkp-0 bGwznd' onclick='window.sketchpad.toggleSketchpad()'><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" class=\"StyledIconBase-ea9ulj-0 bWRyML\"><path d=\"M20 4H4c-1.103 0-2 .897-2 2v10c0 1.103.897 2 2 2h4l-1.8 2.4 1.6 1.2 2.7-3.6h3l2.7 3.6 1.6-1.2L16 18h4c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zM5 13h4v2H5v-2z\"></path></svg></a>`;const SketchpadToggleObserver=new MutationObserver(e=>{const n=document.querySelector(\"[class^='MessageBox__Base']\");n&&!n.contains(sketchpadAction)&&n.appendChild(sketchpadAction)});setTimeout(()=>{SketchpadToggleObserver.observe(document.querySelector(\"[data-component='routes']\"),{subtree:!0,childList:!0})},5e3);window.sketchpad._loadSketchpad();return{onUnload:()=>window.sketchpad._unloadSketchpad()};\n}"}